{
  "type": "object",
  "$schema": "http://json-schema.org/draft-04/schema",
  "id": "http://jsonschema.net",
  "$ref": "http://localhost/plugins/content/component/model.schema",
  "globals": {
    "ariaRegion": {
      "type": "string",
      "required": true,
      "default": "Image with selectable areas. Select each button to show more information.",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    },
    "closeText": {
      "type": "string",
      "required": false,
      "default": "Close",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    },
    "nextText": {
      "type": "string",
      "required": false,
      "default": "Next",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    },
    "previousText": {
      "type": "string",
      "required": false,
      "default": "Previous",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    },
    "startSimulationText": {
      "type": "string",
      "required": false,
      "default": "Start Simulation",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    }
  },
  "properties": {
    "_supportedLayout": {
      "type": "string",
      "required": true,
      "enum": [
        "full-width",
        "half-width",
        "both"
      ],
      "default": "full-width",
      "editorOnly": true
    },
    "instruction": {
      "type": "string",
      "required": false,
      "default": "",
      "inputType": "Text",
      "validators": [],
      "translatable": true
    },
    "_setCompletionOn": {
      "type": "string",
      "required": false,
      "default": "actionSuccess",
      "title": "Set completion on:",
      "enum": [
        "inview",
        "actionSuccess"
      ],
      "inputType": {
        "type": "Select",
        "options": [
          "inview",
          "actionSuccess"
        ]
      },
      "validators": [],
      "help": "Whether completion is based on the learner having viewed all the items - or just having viewed the component"
    },
    "_incorrectFallback": {
      "type": "string",
      "title": "Incorrect Fallback Message",
      "required": true,
      "default": "",
      "inputType": "TextArea",
      "validators": [
        "required"
      ],
      "help": "Body text displayed as general message when you click on a wrong position in a screen",
      "translatable": true
    },
    "_items": {
      "type": "array",
      "required": true,
      "title": "Simulation Screens",
      "validators": [
        "minimumItems2"
      ],
      "items": {
        "type": "object",
        "required": true,
        "properties": {
          "title": {
            "type": "string",
            "required": true,
            "default": "",
            "inputType": "Text",
            "validators": [
              "required"
            ],
            "help": "Title used for editing",
            "translatable": true
          },
          "_screenID": {
            "type": "string",
            "title": "Screen ID",
            "required": true,
            "default": "",
            "inputType": "UniqueID",
            "validators": [
              "required"
            ],
            "help": "ID that identifies your screen, it is used to associate an action to this screen.",
            "translatable": true
          },
          "displayTitle": {
            "type": "string",
            "required": true,
            "default": "",
            "inputType": "Text",
            "validators": [
              "required"
            ],
            "help": "Title visible on the screen",
            "translatable": true
          },
          "_graphic": {
            "type": "object",
            "required": true,
            "title": "Screen Graphic",
            "properties": {
              "src": {
                "type": "string",
                "required": true,
                "default": "",
                "inputType": "Asset:image",
                "validators": [
                  "required"
                ],
                "help": "Background image to be displayed for the screen"
              },
              "_forceFullWidth": {
                "type": "boolean",
                "required": false,
                "default": false,
                "inputType": "Checkbox",
                "validators": [],
                "title": "Force full width",
                "help": "Force full width"
              }
            }
          },
          "body": {
            "type": "string",
            "title": "Screen Message",
            "required": false,
            "default": "",
            "inputType": "TextArea",
            "validators": [],
            "help": "Body text displayed before you can interact with the screen",
            "translatable": true
          },
          "_childItems": {
            "type": "array",
            "required": true,
            "title": "Elements",
            "validators": [
              "required"
            ],
            "items": {
              "type": "object",
              "required": true,
              "properties": {
                "title": {
                  "type": "string",
                  "required": true,
                  "default": "",
                  "inputType": "Text",
                  "validators": [],
                  "help": "Title",
                  "translatable": true,
                  "title": "Element Name"
                },
                "_isForm": {
                  "type": "boolean",
                  "required": false,
                  "default": false,
                  "title": "This element is a form (element group)",
                  "inputType": "Checkbox",
                  "validators": [],
                  "help": "This element requires multiple fields and a submit button"
                },
                "_form": {
                  "type": "array",
                  "required": true,
                  "title": "Form Elements",
                  "validators": [
                    "required"
                  ],
                  "items": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "title": {
                        "type": "string",
                        "required": true,
                        "default": "",
                        "inputType": "Text",
                        "validators": [],
                        "help": "Title",
                        "translatable": true,
                        "title": "Element Name"
                      },
                      "_actionType": {
                        "type": "string",
                        "required": true,
                        "default": "submit",
                        "title": "Type of action",
                        "inputType": {
                          "type": "Select",
                          "options": [
                            "submit",
                            "input",
                            "select"
                          ]
                        },
                        "validators": [],
                        "help": "action type"
                      },
                      "_prefilledType": {
                        "type": "string",
                        "required": true,
                        "default": "none",
                        "title": "Type of pre-filled value",
                        "inputType": {
                          "type": "Select",
                          "options": [
                            "none",
                            "placeholder",
                            "text"
                          ]
                        },
                        "validators": [],
                        "help": "pre-filled type",
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "input"
                            }
                          ]
                        }
                      },
                      "_prefilledValue": {
                        "type": "string",
                        "required": true,
                        "default": "",
                        "inputType": "Text",
                        "validators": [],
                        "help": "Title",
                        "translatable": true,
                        "title": "Pre-filled Value",
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "input"
                            },
                            {
                              "name": "_prefilledType",
                              "!value": "none"
                            }
                          ]
                        }
                      },
                      "_matchTextItems": {
                        "type": "array",
                        "required": true,
                        "title": "Match Text",
                        "validators": [],
                        "items": {
                          "type": "object",
                          "required": true,
                          "properties": {
                            "_matchValue": {
                              "type": "string",
                              "required": true,
                              "default": "",
                              "inputType": "Text",
                              "validators": [
                                "required"
                              ],
                              "help": "Title",
                              "translatable": true,
                              "title": "Text To Match"
                            },
                            "_caseInsensitive": {
                              "type": "boolean",
                              "required": false,
                              "default": false,
                              "title": "Case insensitive",
                              "inputType": "Checkbox",
                              "validators": [],
                              "help": "The text will match no matter the case"
                            },
                            "_matchRegex": {
                              "type": "boolean",
                              "required": false,
                              "default": false,
                              "title": "Match with regex",
                              "inputType": "Checkbox",
                              "validators": [],
                              "help": "Use regex expression as match text"
                            }
                          }
                        },
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "input"
                            }
                          ]
                        }
                      },
                      "matchFailure": {
                        "type": "string",
                        "required": false,
                        "default": "",
                        "inputType": "TextArea",
                        "validators": [],
                        "help": "Body text displayed as failure message",
                        "translatable": true,
                        "title": "Match Text Failure Message",
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "input"
                            }
                          ]
                        }
                      },
                      "_selectOptions": {
                        "type": "array",
                        "required": true,
                        "title": "Select Options",
                        "validators": [],
                        "items": {
                          "type": "object",
                          "required": true,
                          "properties": {
                            "_selectValue": {
                              "type": "string",
                              "required": true,
                              "default": "",
                              "inputType": "Text",
                              "validators": [
                                "required"
                              ],
                              "help": "Option to be displayed in dropdown",
                              "translatable": true,
                              "title": "Title"
                            },
                            "_correctOption": {
                              "type": "boolean",
                              "required": false,
                              "default": false,
                              "title": "Correct option",
                              "inputType": "Checkbox",
                              "validators": [],
                              "help": "Selecting this option will trigger goTo"
                            }
                          }
                        },
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "select"
                            }
                          ]
                        }
                      },
                      "selectFailure": {
                        "type": "string",
                        "required": false,
                        "default": "",
                        "inputType": "TextArea",
                        "validators": [],
                        "help": "Body text displayed as failure message",
                        "translatable": true,
                        "title": "Select Failure Message",
                        "conditions": {
                          "and": [
                            {
                              "name": "_actionType",
                              "value": "select"
                            }
                          ]
                        }
                      },
                      "_zonefinder": {
                        "type": "string",
                        "required": false,
                        "default": "",
                        "inputType": "SimulationZoneFinder",
                        "validators": [],
                        "help": "Pin finder",
                        "title": "Pin finder",
                        "noTitle": true
                      },
                      "_zonefinderSize": {
                        "type": "string",
                        "required": false,
                        "default": "100",
                        "inputType": "Text",
                        "validators": [],
                        "help": "Zone finder sizing",
                        "title": "Zone finder size"
                      },
                      "_position": {
                        "type": "object",
                        "required": false,
                        "title": "Element Size and Position",
                        "properties": {
                          "_left": {
                            "type": "number",
                            "required": true,
                            "default": 0,
                            "title": "Element Position - Left",
                            "inputType": "Number",
                            "validators": [
                              "required",
                              "number"
                            ],
                            "help": "Left position of element"
                          },
                          "_top": {
                            "type": "number",
                            "required": true,
                            "default": 0,
                            "title": "Element Position - Top",
                            "inputType": "Number",
                            "validators": [
                              "required",
                              "number"
                            ],
                            "help": "Top position of element"
                          },
                          "_width": {
                            "type": "number",
                            "required": true,
                            "default": 0,
                            "title": "Element Width",
                            "inputType": "Number",
                            "validators": [
                              "required",
                              "number"
                            ],
                            "help": "Width of element"
                          },
                          "_height": {
                            "type": "number",
                            "required": true,
                            "default": 0,
                            "title": "Element Height",
                            "inputType": "Number",
                            "validators": [
                              "required",
                              "number"
                            ],
                            "help": "Height of element"
                          }
                        }
                      }
                    }
                  },
                  "conditions": {
                    "and": [
                      {
                        "name": "_isForm",
                        "value": "true"
                      }
                    ]
                  }
                },
                "_goTo": {
                  "type": "string",
                  "title": "GoTo",
                  "required": false,
                  "default": "",
                  "inputType": "SelectScreen",
                  "validators": [],
                  "help": "goTo screen",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isSuccess",
                        "!value": "true"
                      }
                    ]
                  }
                },
                "_actionType": {
                  "type": "string",
                  "required": true,
                  "default": "click",
                  "title": "Type of action",
                  "inputType": {
                    "type": "Select",
                    "options": [
                      "click",
                      "input",
                      "select"
                    ]
                  },
                  "validators": [],
                  "help": "action type",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_clickType": {
                  "type": "string",
                  "required": true,
                  "default": "button",
                  "title": "Type of click action",
                  "inputType": {
                    "type": "Select",
                    "options": [
                      "button",
                      "link"
                    ]
                  },
                  "validators": [],
                  "help": "click type",
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "click"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_prefilledType": {
                  "type": "string",
                  "required": true,
                  "default": "none",
                  "title": "Type of pre-filled value",
                  "inputType": {
                    "type": "Select",
                    "options": [
                      "none",
                      "placeholder",
                      "text"
                    ]
                  },
                  "validators": [],
                  "help": "pre-filled type",
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "input"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_prefilledValue": {
                  "type": "string",
                  "required": true,
                  "default": "",
                  "inputType": "Text",
                  "validators": [],
                  "help": "Title",
                  "translatable": true,
                  "title": "Pre-filled Value",
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "input"
                      },
                      {
                        "name": "_prefilledType",
                        "!value": "none"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_matchTextItems": {
                  "type": "array",
                  "required": true,
                  "title": "Match Text",
                  "validators": [],
                  "items": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "_matchValue": {
                        "type": "string",
                        "required": true,
                        "default": "",
                        "inputType": "Text",
                        "validators": [
                          "required"
                        ],
                        "help": "Title",
                        "translatable": true,
                        "title": "Text To Match"
                      },
                      "_caseInsensitive": {
                        "type": "boolean",
                        "required": false,
                        "default": false,
                        "title": "Case insensitive",
                        "inputType": "Checkbox",
                        "validators": [],
                        "help": "The text will match no matter the case"
                      },
                      "_matchRegex": {
                        "type": "boolean",
                        "required": false,
                        "default": false,
                        "title": "Match with regex",
                        "inputType": "Checkbox",
                        "validators": [],
                        "help": "Use regex expression as match text"
                      }
                    }
                  },
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "input"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "matchFailure": {
                  "type": "string",
                  "required": false,
                  "default": "",
                  "inputType": "TextArea",
                  "validators": [],
                  "help": "Body text displayed as failure message",
                  "translatable": true,
                  "title": "Match Text Failure Message",
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "input"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_selectOptions": {
                  "type": "array",
                  "required": true,
                  "title": "Select Options",
                  "validators": [],
                  "items": {
                    "type": "object",
                    "required": true,
                    "properties": {
                      "_selectValue": {
                        "type": "string",
                        "required": true,
                        "default": "",
                        "inputType": "Text",
                        "validators": [
                          "required"
                        ],
                        "help": "Option to be displayed in dropdown",
                        "translatable": true,
                        "title": "Title"
                      },
                      "_correctOption": {
                        "type": "boolean",
                        "required": false,
                        "default": false,
                        "title": "Correct option",
                        "inputType": "Checkbox",
                        "validators": [],
                        "help": "Selecting this option will trigger goTo"
                      }
                    }
                  },
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "select"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "selectFailure": {
                  "type": "string",
                  "required": false,
                  "default": "",
                  "inputType": "TextArea",
                  "validators": [],
                  "help": "Body text displayed as failure message",
                  "translatable": true,
                  "title": "Select Failure Message",
                  "conditions": {
                    "and": [
                      {
                        "name": "_actionType",
                        "value": "select"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_zonefinder": {
                  "type": "string",
                  "required": false,
                  "default": "",
                  "inputType": "SimulationZoneFinder",
                  "validators": [],
                  "help": "Pin finder",
                  "title": "Pin finder",
                  "noTitle": true,
                  "conditions": {
                    "and": [
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_zonefinderSize": {
                  "type": "string",
                  "required": false,
                  "default": "100",
                  "inputType": "Text",
                  "validators": [],
                  "help": "Zone finder sizing",
                  "title": "Zone finder size",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_position": {
                  "type": "object",
                  "required": false,
                  "title": "Element Size and Position",
                  "properties": {
                    "_left": {
                      "type": "number",
                      "required": true,
                      "default": 0,
                      "title": "Element Position - Left",
                      "inputType": "Number",
                      "validators": [
                        "required",
                        "number"
                      ],
                      "help": "Left position of element"
                    },
                    "_top": {
                      "type": "number",
                      "required": true,
                      "default": 0,
                      "title": "Element Position - Top",
                      "inputType": "Number",
                      "validators": [
                        "required",
                        "number"
                      ],
                      "help": "Top position of element"
                    },
                    "_width": {
                      "type": "number",
                      "required": true,
                      "default": 0,
                      "title": "Element Width",
                      "inputType": "Number",
                      "validators": [
                        "required",
                        "number"
                      ],
                      "help": "Width of element"
                    },
                    "_height": {
                      "type": "number",
                      "required": true,
                      "default": 0,
                      "title": "Element Height",
                      "inputType": "Number",
                      "validators": [
                        "required",
                        "number"
                      ],
                      "help": "Height of element"
                    }
                  },
                  "conditions": {
                    "and": [
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_isFailure": {
                  "type": "boolean",
                  "required": false,
                  "default": false,
                  "title": "This action is a failure",
                  "inputType": "Checkbox",
                  "validators": [],
                  "help": "This action is a failure",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isSuccess",
                        "!value": "true"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_failureBody": {
                  "type": "string",
                  "required": false,
                  "default": "",
                  "inputType": "TextArea",
                  "validators": [],
                  "help": "Body text displayed as failure message",
                  "translatable": true,
                  "title": "Failure Message",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isFailure",
                        "value": "true"
                      },
                      {
                        "name": "_isForm",
                        "value": "false"
                      }
                    ]
                  }
                },
                "_isSuccess": {
                  "type": "boolean",
                  "required": false,
                  "default": false,
                  "title": "This action triggers completion",
                  "inputType": "Checkbox",
                  "validators": [],
                  "help": "This action triggers completion",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isFailure",
                        "!value": "true"
                      }
                    ]
                  }
                },
                "_successBody": {
                  "type": "string",
                  "required": false,
                  "default": "",
                  "inputType": "TextArea",
                  "validators": [],
                  "help": "Body text displayed as completion message",
                  "translatable": true,
                  "title": "Completion Message",
                  "conditions": {
                    "and": [
                      {
                        "name": "_isSuccess",
                        "value": "true"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}